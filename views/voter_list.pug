extends layout

block content

	if county
		.card.mb-2
			.card-header.text-center
				.card-title
					h4.text-center #{county.name} County Ballot Counts By Status
				
			.list-group.list-group-flush.primary-text
				if county.accepted_ballots
					- var accepted_percent = (county.accepted_ballots/county.b_count * 100).toFixed(1);
					.list-group-item.disabled.text-primary
						span Accepted Ballots:
						span.float-right #{county.accepted_ballots} (#{accepted_percent}%)
				if county.received_ballots
					- var received_percent = (county.received_ballots/county.b_count * 100).toFixed(1);
					.list-group-item.disabled.text-primary
						span Received Ballots:
						span.float-right #{county.received_ballots} (#{received_percent}%)
				if county.rejected_ballots
					- var rejected_percent = (county.rejected_ballots/county.b_count * 100).toFixed(1);
					.list-group-item.disabled.text-primary
						span Challenged Ballots:
						span.float-right #{county.rejected_ballots} (#{rejected_percent}%)
			.card-footer.text-center
				small Ballots will first be received and then will either get accepted or challenged.  Challenged ballots are not permanently rejected, they can be resolved through a process called curing, you can make sure your vote is counted if it has been challenged by contacting your county auditor's office.
	
	.card
		.card-header.text-center
			.card-title
				h4.text-center Search Results: #{voters.length} Voters

		.list-group.list-group-flush
			each voter in voters
				if voter.ballot
					if voter.ballot.status == "Accepted"
						a.list-group-item.list-group-item-action.list-group-item-success(href='/voter/wa/id/'+voter._id.toLowerCase()) 
							h3.fa.fa-thumbs-up.fa-fw.float-right
							.ml-0 #{voter.lname}, #{voter.fname} #{voter.mname}
							.ml-2.small #{voter.street} #{voter.city}
							.ml-2.small Voter Status: #{voter.status}
							.ml-2.small Ballot Status: #{voter.ballot.status} on #{voter.ballot.sdate}
							//.ml-2.small Auditor Comment: #{voter.ballot.comment}

					else if voter.ballot.status == "Received"
						a.list-group-item.list-group-item-action.list-group-item-warning(href='/voter/wa/id/'+voter._id.toLowerCase()) 
							h3.fa.fa-fw.float-right
							.ml-0 #{voter.lname}, #{voter.fname} #{voter.mname}
							.ml-2.small #{voter.street} #{voter.city}
							.ml-2.small Voter Status: #{voter.status}
							.ml-2.small Ballot Status: #{voter.ballot.status} on #{voter.ballot.sdate}
							if(voter.ballot.comment)
								.ml-2.small Auditor Comment: #{voter.ballot.comment}

					else if voter.ballot.status == "Rejected"
						a.list-group-item.list-group-item-action.list-group-item-danger(href='/voter/wa/id/'+voter._id.toLowerCase()) 
							h3.fa.fa-thumbs-down.fa-fw.float-right
							.ml-0 #{voter.lname}, #{voter.fname} #{voter.mname}
							.ml-2.small #{voter.street} #{voter.city}
							.ml-2.small Voter Status: #{voter.status}
							.ml-2.small Ballot Status: #{voter.ballot.status} on #{voter.ballot.sdate}
							if(voter.ballot.comment)
								.ml-2.small Auditor Comment: #{voter.ballot.comment}
				else
					a.list-group-item.list-group-item-action(href='/voter/wa/id/'+voter._id.toLowerCase()) 
						h3.fa.fa-fw.float-right
						.ml-0 #{voter.lname}, #{voter.fname}
						.ml-2.small #{voter.street} #{voter.city}
						.ml-2.small Voter Status: #{voter.status}
						.ml-2.small Ballot Status: None


			.list-group-item.text-center()
				i.fa.fa-thumbs-up.fa-fw() 
				| Voted in the 2020 Trump/Biden General Election&nbsp;
